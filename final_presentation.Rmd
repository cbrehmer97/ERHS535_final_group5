---
title: "Final Presentation"
author: "Collin Brehmer, Molly Hischke, Kyle Hancock, Nikki Johnson"
date: "12/13/2019"
output:
  ioslides_presentation: default
  beamer_presentation: default
---
<style type="text/css">

body, td {
   font-size: 14px;
}
code.r{
  font-size: 20px;
}
pre {
  font-size: 20px
}
</style>

## Research Question

What positions on the Jeopardy board are most likely to be a Daily Double?

## Introduction

- Importance to the game (James Holzhauer)
<br><br>
- Previous analyses (none over time)
<br><br>
- Challenge of finding position
<br><br>
- Visual representation

## Methods

- Only included episodes from dates beyond November 26, 2001 
<br><br>
- Finding x position of daily double (filtered to episodes with 12 categories)
<br><br>
- Finding y position of daily double (Weighted across missing values)



```{r, echo = FALSE, message = FALSE, include = FALSE}
library(tidyverse)
library(ggplot2)
jeopardy_board <- tibble(
  x_pos = c("Category 1", "Category 1", "Category 1", 
            "Category 1", "Category 1", 
            "Category 2", "Category 2", "Category 2", 
            "Category 2", "Category 2",
            "Category 3", "Category 3", "Category 3", 
            "Category 3", "Category 3", 
            "Category 4", "Category 4", "Category 4", 
            "Category 4", "Category 4", 
            "Category 5", "Category 5", "Category 5", 
            "Category 5", "Category 5",
            "Category 6", "Category 6", "Category 6", 
            "Category 6", "Category 6"),
  y_pos = c(200, 400, 600, 800, 1000, 
            200, 400, 600, 800, 1000,
            200, 400, 600, 800, 1000,
            200, 400, 600, 800, 1000,
            200, 400, 600, 800, 1000, 
            200, 400, 600, 800, 1000))

jeopardy_board <- jeopardy_board %>% 
  mutate(number_of_dd = c(1, 0, 0, 2, 1,
                          1, 0, 1, 1, 1,
                          1, 1, 1, 1, 1,
                          1, 1, 1, 0, 1,
                          1, 0, 0, 1, 1,
                          1, 1, 1, 0, 1),
          text = c(NA, "MISSING", "MISSING", "Daily Double", NA,
                          NA, "MISSING", NA, NA, NA,
                          NA, NA, NA, NA, NA,
                          NA, NA, NA, "MISSING", NA,
                          NA, "MISSING", "MISSING", NA, NA,
                          NA, NA, NA, "MISSING", NA)) 
weighted_jeopardy_board <- jeopardy_board %>% 
  mutate(number_of_dd = c(NA, 0.33, 0.33, 0.33, NA,
                          NA, NA, NA, NA, NA,
                          NA, NA, NA, NA, NA,
                          NA, NA, NA, NA, NA,
                          NA, NA, NA, NA, NA,
                          NA, NA, NA, NA, NA)) 

```

## Methods
      
```{r, echo = FALSE, fig.height= 4, fig.width = 7, warning = FALSE}
jeopardy_board %>% 
   mutate(y_pos = factor(y_pos), 
                        y_pos = factor(y_pos, levels = rev(levels(y_pos)))) %>% 
  ggplot(aes(x = x_pos, y = y_pos, fill = number_of_dd)) +
  geom_tile(color = "White", size = 0.1) +
  scale_fill_continuous(high = "#132B43", low = "white") + 
  labs(x = NULL, 
       y = NULL, 
       fill = NULL) +
  theme(legend.position = "none") + 
  geom_text(aes(label = text), color = "gray") +
  scale_x_discrete(position = "top") +
  labs(caption = paste0("Figure 1. In Category 1, the 400, 600 and 800 values",
  " were missing, and \na daily double question was asked. But it's unknown ",
  "if the daily double was \nat the 400, 600 or 800 value position.")) +
  theme(plot.caption = element_text(hjust = 0, size = rel(1.2)))
```

## Methods

```{r, echo = FALSE, fig.height= 4, fig.width = 7, warning = FALSE}
weighted_jeopardy_board %>% 
   mutate(y_pos = factor(y_pos), 
                        y_pos = factor(y_pos, levels = rev(levels(y_pos)))) %>% 
  ggplot(aes(x = x_pos, y = y_pos, fill = number_of_dd)) +
  geom_tile(color = "White", size = 0.1) +
  scale_fill_continuous(high = "#132B43", low = "white") + 
  labs(x = NULL, 
       y = NULL, 
       fill = NULL) +
  theme(legend.position = "none") + 
  geom_text(aes(label = number_of_dd)) +
  scale_x_discrete(position = "top") +
  labs(caption = paste0("Figure 2. The daily double within a category was ",
                        "weighted acrossed all \nmissing values.")) +
  theme(plot.caption = element_text(hjust = 0, size = rel(1.2)))
```

## Results

Flex Dashboard:

- Daily Double Round 1 since 2001
- Daily Double Round 2 since 2001
- Daily Double Location by year
<br><br>
- Daily Doubles are not evenly distributed across the board
- No differences in daily double location between Round 1 and Round 2
- 15 out of 19 years had daily doubles within the 800/1600 row

## Conclusions

- Similar to previous analyses
    - https://flowingdata.com/2015/03/03/where-to-find-jeopardy-daily-doubles/
<br><br>
- Shift in location in 2016
    - Arthur Chu and subsequent analyses
<br><br>
- Future locations (pattern or random)

## Overview of Approach
<ol>
<li> Nest data by air date
<br><br>
<li> Pull out subsets of that data
<br><br>
<li> Modify subsets by:
<ol type = "a">
<li> Adding additional information (i.e. weight, x/y position) </li>
<li> Manipulating data (i.e. expanding, further subsetting) </li>
</ol>
</li>
</ol>
<ol start = "3">
<li> Rejoin dataframes to get desired information
<br><br>
<li> Create tidy dataset for plots
</ol>

## Interesting Packages or Techniques
<font size="4">

- Creating perfect data frame
  + Package: `tidyr`
  + Function(s): `expand()`
<br><br>
- Mapping
  + Package: `purrr`
  + Function(s): `map()`, `map2()`
<br><br>
- Joining
  + Package: `dplyr`
  + Function(s): `right_join()`, `full_join()`, `left_join()`
<br><br>
- Plotting
  + Package: `plotly`
  + Function(s): `plot_ly()`

</font>

## Examples
<font size="4.5">

- Input
  + `categories_unique`: categories asked in each episode
  + `categories_asked`: information about asked questions
  
```{r, eval=FALSE}
mutate(categories_unique = map(categories_unique, 
                            ~ rownames_to_column(., var = "x_pos")),
         perfect_pos = map2(categories_unique, categories_asked, 
                            ~ full_join(.x, .y)),
         perfect_pos = map(perfect_pos, 
                           ~ group_by(., round)),
         perfect_pos = map(perfect_pos, 
                           ~ expand(., x_pos, value)))
```

- Output
  + `categories_unique`: x position assigned to each category
  + `perfect_pos`: perfect df for each game
  
</font>

## Examples

<font size="4.5">

- Input
  + `dd_perfect`: perfect DD df
  + `dd_weight`: df containing the weight to be assiged to DD questions
  
```{r, eval = FALSE}
mutate(dd_perfect = map2(dd_perfect, dd_weight,
                ~ full_join(.x, .y, by = "category")),
dd_perfect = map(dd_perfect, 
                 ~ mutate(., daily_double = case_when(
                   is.na(daily_double) == TRUE ~ weight,
                   is.na(daily_double) == FALSE ~ daily_double))))
```

- Output
  + `dd_perfect`: perfect DD df with weights added

</font>

## Lessons Learned

1. Seemingly simple problems may not be simple to answer.
